<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.airpremia.eosh.risk.repository.CodeRiskLikelihoodRepository">

    <select id="selectRiskLikelihoodClassificationList" resultType="CodeRiskLikelihoodClassificationEntity">
        SELECT
             t_mast.likelihood_classification_seq
            ,t_mast.risk_version_seq
            ,t_mast.likelihood_subject
            ,t_mast.lowest_likelihood_content
            ,t_mast.low_likelihood_content
            ,t_mast.medium_likelihood_content
            ,t_mast.high_likelihood_content
            ,t_mast.highest_likelihood_content
            ,t_mast.delete_bool
            ,t_mast.delete_user_id
            ,t_mast.delete_dtm
            ,t_mast.delete_ip
            ,t_mast.insert_user_id
            ,t_mast.insert_dtm
            ,t_mast.insert_ip
            ,t_mast.update_user_id
            ,t_mast.update_dtm
            ,t_mast.update_ip
        FROM
            code_risk_likelihood_classification t_mast
        <where>
        and t_mast.risk_version_seq = #{riskVersionSeq}
        and t_mast.delete_bool = false
        </where>
        ORDER BY
            t_mast.likelihood_classification_seq asc
    </select>

    <update id="deleteRiskLikelihoodClassificationList">
        UPDATE code_risk_likelihood_classification
        SET
             delete_bool = true
            ,delete_user_id = #{codeRiskLikelihoodClassificationEntity.deleteUserId}
            ,delete_dtm = #{codeRiskLikelihoodClassificationEntity.deleteDtm}
            ,delete_ip = #{codeRiskLikelihoodClassificationEntity.deleteIp}
        <where>
            and risk_version_seq = #{codeRiskLikelihoodClassificationEntity.riskVersionSeq}
            and delete_bool = false
            <if test="@com.airpremia.esmsfos.core.MybatisUtils@isNotEmpty(excludeLikelihoodClassificationSeqList)">
            and likelihood_classification_seq not in (
                <foreach collection="excludeLikelihoodClassificationSeqList" item="item" separator=" , ">
                #{item}
                </foreach>
            )
            </if>
        </where>
    </update>
    <insert id="insertRiskLikelihoodClassification" useGeneratedKeys="true" keyProperty="likelihoodClassificationSeq">
        INSERT INTO code_risk_likelihood_classification
            ( risk_version_seq, likelihood_subject, lowest_likelihood_content, low_likelihood_content, medium_likelihood_content, high_likelihood_content, highest_likelihood_content, insert_user_id, insert_dtm, insert_ip, update_user_id, update_dtm, update_ip )
        VALUES
            ( #{riskVersionSeq}, #{likelihoodSubject}, #{lowestLikelihoodContent}, #{lowLikelihoodContent}, #{mediumLikelihoodContent}, #{highLikelihoodContent}, #{highestLikelihoodContent}, #{insertUserId}, #{insertDtm}, #{insertIp}, #{updateUserId}, #{updateDtm}, #{updateIp} )
    </insert>
    <update id="updateRiskLikelihoodClassification">
        UPDATE code_risk_likelihood_classification
        SET
            likelihood_subject = #{likelihoodSubject}
            ,lowest_likelihood_content = #{lowestLikelihoodContent}
            ,low_likelihood_content = #{lowLikelihoodContent}
            ,medium_likelihood_content = #{mediumLikelihoodContent}
            ,high_likelihood_content = #{highLikelihoodContent}
            ,highest_likelihood_content = #{highestLikelihoodContent}
            ,update_user_id = #{updateUserId}
            ,update_dtm = #{updateDtm}
            ,update_ip = #{updateIp}
        <where>
            and risk_version_seq = #{riskVersionSeq}
            and likelihood_classification_seq = #{likelihoodClassificationSeq}
        </where>
    </update>

</mapper>
