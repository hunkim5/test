<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.airpremia.eosh.risk.repository.CodeRiskRepository">

    <select id="selectCodeRiskList" resultType="CodeRiskEntity">
        SELECT
             t_mast.risk_version_seq
            ,t_mast.risk_code
            ,t_mast.risk_grade_code
            ,t_mast.insert_user_id
            ,t_mast.insert_dtm
            ,t_mast.insert_ip
            ,t_mast.update_user_id
            ,t_mast.update_dtm
            ,t_mast.update_ip
        FROM
            code_risk t_mast
        <where>
        and t_mast.risk_version_seq = #{riskVersionSeq}
        </where>
        ORDER BY
            t_mast.risk_code
    </select>

    <select id="selectExistsRiskCodeList" resultType="CodeRiskEntity">
        SELECT
             t_mast.risk_version_seq
            ,t_mast.risk_code
            ,t_mast.risk_grade_code
            ,t_mast.insert_user_id
            ,t_mast.insert_dtm
            ,t_mast.insert_ip
            ,t_mast.update_user_id
            ,t_mast.update_dtm
            ,t_mast.update_ip
        FROM
            code_risk t_mast
        <where>
        and t_mast.risk_version_seq = #{riskVersionSeq}
        </where>
    </select>
    <insert id="insertRiskCode">
        INSERT INTO code_risk
            ( risk_version_seq, risk_code, risk_grade_code, insert_user_id, insert_dtm, insert_ip, update_user_id, update_dtm, update_ip )
        VALUES
            ( #{riskVersionSeq}, #{riskCode}, #{riskGradeCode}, #{insertUserId}, #{insertDtm}, #{insertIp}, #{updateUserId}, #{updateDtm}, #{updateIp} )
    </insert>
    <update id="updateRiskCode">
        UPDATE code_risk
        SET
             risk_grade_code = #{riskGradeCode}
            ,update_user_id = #{updateUserId}
            ,update_dtm = #{updateDtm}
            ,update_ip = #{updateIp}
        <where>
        and risk_version_seq = #{riskVersionSeq}
        and risk_code = #{riskCode}
        </where>
    </update>

</mapper>
