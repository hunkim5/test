<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.airpremia.eosh.jobplan.repository.JobWalkieTalkieRepository">
    <select id="selectJobWalkieTalkie" resultType="JobWalkieTalkieDto">
        SELECT job_walkie_talkie_seq
           ,job_seq
           ,employee_number
           ,employee_name
           ,division
           ,check_employee_number
           ,check_bool
        FROM job_walkie_talkie
        <where>
           job_seq = #{jobSeq}
        </where>
    </select>

    <insert id="insertJobWalkieTalkieList">
        INSERT INTO job_walkie_talkie (
            job_seq
            ,employee_number
            ,employee_name
            ,division
            ,check_employee_number
            ,check_bool
            ,insert_ip
            )
        VALUES
        <foreach collection="jobWalkieTalkieList" item="item" separator=",">
        (
            #{item.jobSeq}
            ,#{item.employeeNumber}
            ,#{item.employeeName}
            ,#{item.division}
            ,#{item.checkEmployeeNumber}
            ,#{item.checkBool}
            ,#{item.insertIp}
        )
        </foreach>
    </insert>

    <update id="updateJobWalkieTalkie">
        UPDATE job_walkie_talkie SET
         check_bool = #{checkBool}
        <where>
            job_walkie_talkie_seq = #{jobWalkieTalkieSeq}
        </where>
    </update>

    <delete id="deleteJobWalkieTalkieList">
        DELETE
        FROM job_walkie_talkie
        <where>
            job_walkie_talkie_seq IN
            <foreach item="jobWalkieTalkieSeq" collection="registeredJobWalkieTalkieSeqList" open="(" separator="," close=")">
                #{jobWalkieTalkieSeq}
            </foreach>
        </where>
    </delete>
    <delete id="deleteJobWalkieTalkieListByJobPlanSeq">
        DELETE
        FROM job_walkie_talkie
        <where>
            job_seq IN (
                <foreach collection="deleteSeqList" item="jobSeq" separator=",">
                    #{jobSeq}
                </foreach>
            )
        </where>
    </delete>
</mapper>