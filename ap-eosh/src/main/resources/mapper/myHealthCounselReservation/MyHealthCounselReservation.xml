<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.airpremia.eosh.personaldetail.userhealthcounselreservation.repository.UserHealthCounselReservationRepository">

    <select id="selectUserHealthCounselReservationPage" resultType="UserHealthCounselReservationDto">
           SELECT user_health_counsel_reservation_seq
           ,counsel_reservation_user_id
           ,counsel_reservation_user_name
           ,counsel_reservation_department_id
           ,counsel_reservation_department_name
           ,handphone_no
           ,health_counsel_appvalprc_enum
           ,health_counsel_classification_code
           ,reservation_dtm
           ,health_counsel_subject
           ,health_counsel_content
           ,reject_reason
        FROM user_health_counsel_reservation
        WHERE
            health_counsel_appvalprc_enum != "CANCEL"
    </select>

    <select id="selectUserHealthCounselReservation" resultType="UserHealthCounselReservationDto">
           SELECT user_health_counsel_reservation_seq
           ,counsel_reservation_user_id
           ,counsel_reservation_user_name
           ,counsel_reservation_department_id
           ,counsel_reservation_department_name
           ,handphone_no
           ,health_counsel_appvalprc_enum
           ,health_counsel_classification_code
           ,reservation_dtm
           ,health_counsel_subject
           ,health_counsel_content
           ,reject_reason
        FROM user_health_counsel_reservation
        WHERE
            user_health_counsel_reservation_seq = #{userHealthCounselReservationSeq}
    </select>

    <insert id="insertUserHealthCounselReservation" useGeneratedKeys="true" keyProperty="userHealthCounselReservationSeq">
        INSERT INTO user_health_counsel_reservation
        (counsel_reservation_user_id
        ,counsel_reservation_user_name
        ,counsel_reservation_department_id
        ,counsel_reservation_department_name
        ,handphone_no
        ,health_counsel_appvalprc_enum
        ,health_counsel_classification_code
        ,reservation_dtm
        ,health_counsel_subject
        ,health_counsel_content
        ,reject_reason
        ,insert_ip
        ,insert_user_id)
 VALUES
        (#{counselReservationUserId}
        ,#{counselReservationUserName}
        ,#{counselReservationDepartmentId}
        ,#{counselReservationDepartmentName}
        ,#{handphoneNo}
        ,#{healthCounselAppvalprcEnum}
        ,#{healthCounselClassificationCode}
        ,#{reservationDtm}
        ,#{healthCounselSubject}
        ,#{healthCounselContent}
        ,#{rejectReason}
        ,#{insertIp}
        ,#{insertUserId})
    </insert>

    <update id="updateUserHealthCounselReservation">
        UPDATE user_health_counsel_reservation SET
        counsel_reservation_user_id = #{counselReservationUserId}
        ,counsel_reservation_user_name = #{counselReservationUserName}
        ,counsel_reservation_department_id = #{counselReservationDepartmentId}
        ,counsel_reservation_department_name = #{counselReservationDepartmentName}
        ,handphone_no = #{handphoneNo}
        ,health_counsel_appvalprc_enum = #{healthCounselAppvalprcEnum}
        ,health_counsel_classification_code = #{healthCounselClassificationCode}
        ,reservation_dtm = #{reservationDtm}
        ,health_counsel_subject = #{healthCounselSubject}
        ,health_counsel_content = #{healthCounselContent}
        ,reject_reason = #{rejectReason}
        ,update_ip = #{updateIp}
        ,update_user_id = #{updateUserId}
        <where>
            AND user_health_counsel_reservation_seq = #{userHealthCounselReservationSeq}
        </where>
    </update>

    <delete id="deleteUserHealthCounselReservation">
        DELETE
        FROM user_health_counsel_reservation
        <where>
            user_health_counsel_reservation_seq = #{userHealthCounselReservationSeq}
        </where>
    </delete>
</mapper>
